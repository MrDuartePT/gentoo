https://github.com/gentoo/cargo-ebuild/pull/36

This patch makes cargo-ebuild compatible with current gentoo QA
and fixes an outstanding rustsec issue
https://rustsec.org/advisories/RUSTSEC-2023-0003
--- a/Cargo.lock
+++ b/Cargo.lock
@@ -78,7 +78,7 @@ dependencies = [
 
 [[package]]
 name = "cargo-ebuild"
-version = "0.5.4"
+version = "0.5.4-r2"
 dependencies = [
  "anyhow",
  "cargo-lock",
--- a/Cargo.toml
+++ b/Cargo.toml
@@ -1,6 +1,6 @@
 [package]
 name = "cargo-ebuild"
-version = "0.5.4"
+version = "0.5.4-r2"
 authors = ["Doug Goldstein <cardoe@cardoe.com>"]
 license = "MIT/Apache-2.0"
 edition = "2018"
--- a/src/base.tera
+++ b/src/base.tera
@@ -19,7 +19,7 @@ DESCRIPTION={%- block description -%}"{{ description | trim }}"{%- endblock %}
 # Double check the homepage as the cargo_metadata crate
 # does not provide this value so instead repository is used
 HOMEPAGE={%- block homepage -%}"{{ homepage }}"{%- endblock %}
-SRC_URI={%- block src_uri -%}{% raw -%}"$(cargo_crate_uris)"{%- endraw %}{%- endblock %}
+SRC_URI={%- block src_uri -%}{% raw -%}"${CARGO_CRATE_URIS}"{%- endraw %}{%- endblock %}
 
 # License set may be more restrictive as OR is not respected
 # use cargo-license for a more accurate license picture
--- a/src/lib.rs
+++ b/src/lib.rs
@@ -94,7 +94,7 @@ pub fn gen_ebuild_data( manifest_path: Option<&Path>
         if let Some(src) = &pkg.source {
             // Check if the crate is available at crates.io
             if src.is_crates_io() {
-                crates.push(format!("\t{}-{}\n", pkg.name, pkg.version));
+                crates.push(format!("\t{}@{}\n", pkg.name, pkg.version));
             }
         }
     }
